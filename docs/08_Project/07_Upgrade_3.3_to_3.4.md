# Upgrade 3.3 to 3.4

Welcome to the RedBeanPHP ORM upgrade guide for upgrading from version 3.3 to version 3.4.
RedBeanPHP 3.4 is a minor release, this means that it's almost backward compatible with previous
releases in the 3-series. However even in a minor release there might be minor incompatibilities
because the product has to move forward. This chapter describes the minor backward compatibilities
and how to deal with them.

## No more escaping

RedBeanPHP 3.4 no longer has an $adapter-&gt;escape() / $database-&gt;Escape() method.
RedBeanPHP has always offered parameter binding and parameter binding has always been the
preferred way to write queries. The escape methods therefore have been confusing and
might lead to SQL injection because people don't know how to use them. Parameter binding
is much more safe and this is why I have decided to remove the escape() methods completely.
If you have code that relies on the escape() methods please rewrite this code to use
parameter binding, it makes your code safer and more consistent. If you insist on using
escaping instead of parameter binding you can still use the underlying PDO instance for this:
[R::$adapter->getDatabase->getPDO()->quote();](http://php.net/manual/en/pdo.quote.php "PDO quote() documentation").

## TimeLine and Sync

RedBeanPHP has grown a little fat. Therefore I removed two plugins from the main distribution; namely
TimeLine and Sync. Since they are only useful to some people I figured they can just as well remain on
github. You can compile them into rb.php yourself using
[Replica](http://www.redbeanphp.com/replica "read more about Replica") the RedBeanPHP build tool.

## Extra Cooker flag

The Cooker (R::graph()) - a tool in RedBeanPHP to quickly turn entire array hierarchies in bean hierarchies and
store them in the database will now throw an exception if you want to load a bean (by providing an id). You can turn this
off using: RedBean_Plugin_Cooker::enableBeanLoading(true);

## Uppercase characters

Formally RedBeanPHP never allowed the use of uppercase chars in properties. However this was always easy to
circumvent if you knew how. In RedBeanPHP 3.4 uppercase characters will be used to generate 'beautiful' column names.
For instance, a property called 'singleMalt' will result in a column single_malt. The reason why RedBeanPHP never
allowed uppercase chars (and still does not allow) is because this tends to cause inter-operating system issues as
well as fundamental cross database issues (some OSes and database engines are case sensitive while others are not).
However like I said the restriction was easy to circumvent if you studied the API carefully. In RedBeanPHP 3.4
You'll have to turn off the beautifier to use circumvent the restriction using: RedBean_OODBBean::setFlagBeautifulColumnNames(false);
Of course, I still recommend not to do this. Instead I hope you enjoy the beautiful underscore-columns, generated by the
'beautifier'.

## No more SET(1) in MySQL

From now on RedBeanPHP will use **BOOLEAN** (TINYINT 1) as the default column for boolean values instead of
**SET(1)**. This has been done to make the behaviour across database platforms more consistent. Also
SET(1) columns have some issues regarding **NULL** because they either represent 1 or NULL (or empty)
while **TINYINT(1)** can
respresent **NULL**, **TRUE (1)** and **FALSE (0)**. Unfortunately none of the database platforms has a good boolean column type
(actually Postgres has a real boolean value but it's too strict and required a cast for every comparison).
Therefore I feel TINYINT or INTEGERS are the best way to represent booleans given the current state of database
platforms.
