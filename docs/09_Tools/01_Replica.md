# Replica

Replica is the build script for RedBeanPHP. The _all-in-one package_ on the homepage has been
built using Replica.

Using Replica you can build your own all-in-one PHP file. Replica reads the **replica.xml**
file which contains a list of files to be added to the _rb-file_. The
_R-facade class_ is dynamically
generated by Replica.

This is what a line in the **replica.xml** file looks like:

<?php code('
<item type="php">RedBean/Logger.php</item>
');?>

This line will instruct Replica to add the PHP file **RedBean/Logger.php** to the
package.

To run replica type:

<kbd>
php replica.php
</kbd>

Replica will tell you which files are included in the build:

<kbd>
Adding: RedBean/license.txt
</kbd>

Afterwards, you will find the all-in-one file in your directory:

<kbd>
rb.php
</kbd>

## Flavours (version 3.3+)

It's possible to not generate just one but several all-in-one packages, all containing
different collections of php files. These additional versions are called flavours. To add
a php file to a 'flavour' called 'oci' we can use:

<?php code('
<item type="php" flavour="oci">RedBean/QueryWriter/Oracle.php</item>
');?>

This line will add the Oracle driver to the **rboci.php** file. This file has the same
contents as **rb.php** but with the addition of the Oracle.php file.

Replica will report about flavour specific items:

<kbd>
Adding: RedBean/QueryWriter/Oracle.php to flavour: oci
</kbd>

And after running Replica you will see two builds in your directory:

<kbd>
rb.php

rboci.php
</kbd>

## Replica and Plugins (version 3.3+)

Plugins can add static methods to the R facade class. To do so, a plugin has to add
a comment containing the **@plugin** section. What comes after the word **@plugin**
will be inserted into the _R-facade class_.

For instance, consider the imaginary plugin _'CSVImport'_. If we add the line:

<?php code('
// @plugin public static function CSV($file){ ... }
');?>

And we include an entry to the XML configuration:

<?php code('
<item type="php" >RedBean/Plugins/CSVImport.php</item>
');?>

then we can now use the method:

<?php code('
$beans = R::CSV($file);
');?>

Which allows us to dynamically add methods to the _R-facade class_.
